<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="ObligatorioTT.Views.CotizacionesPage"
    Title="Cotizaciones"
    BackgroundColor="#0b1220">

    <Grid>
        <!-- Fondo con gradiente -->
        <BoxView>
            <BoxView.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#0b1220" Offset="0" />
                    <GradientStop Color="#121a2a" Offset="1" />
                </LinearGradientBrush>
            </BoxView.Background>
        </BoxView>
            <ScrollView>
                <VerticalStackLayout Padding="20" Spacing="16">

                    <!-- Header -->
                    <Frame Padding="14" HasShadow="True" CornerRadius="16" BackgroundColor="#1f2937">
                        <Grid ColumnDefinitions="*,Auto">
                            <VerticalStackLayout Spacing="4">
                                <Label Text="Mercado de divisas"
                                       TextColor="White" FontSize="20" FontAttributes="Bold" />
                            </VerticalStackLayout>

                            <HorizontalStackLayout Grid.Column="1" Spacing="10" VerticalOptions="Center">
                                <Frame Padding="8,4" BackgroundColor="#111827" HasShadow="False" CornerRadius="10">
                                    <Label Text="Fuente: CurrencyLayer" TextColor="#E5E7EB" FontSize="12" />
                                </Frame>
                                <ActivityIndicator x:Name="spinner" IsRunning="False" IsVisible="False" />
                            </HorizontalStackLayout>
                        </Grid>
                    </Frame>

                    <!-- Cards (3 full-width, uniform, valor a la derecha) -->
                    <VerticalStackLayout Spacing="12">

                        <!-- USD -->
                        <Frame BackgroundColor="#111827" CornerRadius="18" HasShadow="True" Padding="14">
                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto" ColumnSpacing="12">
                                <Frame Padding="8" BackgroundColor="#0b1220" HasShadow="False" CornerRadius="12"
                                       WidthRequest="48" HeightRequest="48" VerticalOptions="Center">
                                    <Image Source="us.png"
                                           WidthRequest="28" HeightRequest="28"
                                           Aspect="AspectFit"
                                           HorizontalOptions="Center" VerticalOptions="Center"/>
                                </Frame>

                                <VerticalStackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center">
                                    <Label Text="Dólar US" TextColor="White" FontAttributes="Bold" />
                                    <Label Text="USD" TextColor="#9CA3AF" FontSize="12" />
                                </VerticalStackLayout>

                                <Label Grid.Column="2" x:Name="lblUSD"
                                       Text="-" TextColor="White" FontSize="22" FontAttributes="Bold"
                                       VerticalOptions="Center" HorizontalOptions="End" />
                            </Grid>
                        </Frame>

                        <!-- EUR -->
                        <Frame BackgroundColor="#111827" CornerRadius="18" HasShadow="True" Padding="14">
                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto" ColumnSpacing="12">
                                <Frame Padding="8" BackgroundColor="#0b1220" HasShadow="False" CornerRadius="12"
                                       WidthRequest="48" HeightRequest="48" VerticalOptions="Center">
                                    <Image Source="eu.png"
                                           WidthRequest="28" HeightRequest="28"
                                           Aspect="AspectFit"
                                           HorizontalOptions="Center" VerticalOptions="Center"/>
                                </Frame>

                                <VerticalStackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center">
                                    <Label Text="Euro" TextColor="White" FontAttributes="Bold" />
                                    <Label Text="EUR" TextColor="#9CA3AF" FontSize="12" />
                                </VerticalStackLayout>

                                <Label Grid.Column="2" x:Name="lblEUR"
                                       Text="-" TextColor="White" FontSize="22" FontAttributes="Bold"
                                       VerticalOptions="Center" HorizontalOptions="End" />
                            </Grid>
                        </Frame>

                        <!-- BRL -->
                        <Frame BackgroundColor="#111827" CornerRadius="18" HasShadow="True" Padding="14">
                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto" ColumnSpacing="12">
                                <Frame Padding="8" BackgroundColor="#0b1220" HasShadow="False" CornerRadius="12"
                                       WidthRequest="48" HeightRequest="48" VerticalOptions="Center">
                                    <Image Source="br.png"
                                           WidthRequest="28" HeightRequest="28"
                                           Aspect="AspectFit"
                                           HorizontalOptions="Center" VerticalOptions="Center"/>
                                </Frame>

                                <VerticalStackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center">
                                    <Label Text="Real" TextColor="White" FontAttributes="Bold" />
                                    <Label Text="BRL" TextColor="#9CA3AF" FontSize="12" />
                                </VerticalStackLayout>

                                <Label Grid.Column="2" x:Name="lblBRL"
                                       Text="-" TextColor="White" FontSize="22" FontAttributes="Bold"
                                       VerticalOptions="Center" HorizontalOptions="End" />
                            </Grid>
                        </Frame>

                    </VerticalStackLayout>

                    <!-- Actualización -->
                    <Label x:Name="lblUpdatedBottom"
                           Text="Actualizado: -"
                           TextColor="#9CA3AF"
                           FontSize="12"
                           FontAttributes="Italic"
                           Opacity="0.9"
                           Margin="2,2,0,0"
                           HorizontalOptions="Start" />

                    <!-- Estado / errores -->
                    <Label x:Name="lblEstado" Text=""
                           TextColor="#9CA3AF" FontSize="12"
                           HorizontalOptions="Center" />
                </VerticalStackLayout>
            </ScrollView>
    </Grid>
</ContentPage>
